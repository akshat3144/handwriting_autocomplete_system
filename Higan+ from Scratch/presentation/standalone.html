<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HiGAN+ Showcase</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React, ReactDOM from CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Recharts -->
    <script src="https://unpkg.com/recharts@2.5.0/dist/Recharts.js"></script>
    
    <!-- Framer Motion -->
    <script src="https://unpkg.com/framer-motion@10.16.0/dist/framer-motion.js"></script>
    
    <!-- MathJax -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        const { BarChart, Bar, XAxis, YAxis, Tooltip, Legend, ResponsiveContainer, CartesianGrid } = Recharts;
        const { motion } = Motion;

        // Sample comparative metrics (Current vs Target)
        const metricsData = [
          { name: 'CER (%)', Current: 10, Target: 5 },
          { name: 'WER (%)', Current: 30, Target: 15 },
          { name: 'FID', Current: 52, Target: 28 },
          { name: 'KID', Current: 0.04, Target: 0.02 },
          { name: 'MSSIM', Current: 0.70, Target: 0.78 },
          { name: 'PSNR', Current: 20, Target: 22 }
        ];

        // Architecture SVGs as React components
        function PipelineSVG() {
          return (
            <svg viewBox="0 0 1000 260" className="w-full h-56" preserveAspectRatio="xMidYMid meet">
              <defs>
                <linearGradient id="g1" x1="0" x2="1">
                  <stop offset="0%" stopColor="#7dd3fc" />
                  <stop offset="100%" stopColor="#60a5fa" />
                </linearGradient>
                <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
                  <feDropShadow dx="0" dy="4" stdDeviation="6" floodColor="#000" floodOpacity="0.12" />
                </filter>
              </defs>

              <rect x="20" y="30" rx="8" ry="8" width="160" height="60" fill="#fff" stroke="#e6eefb" />
              <text x="100" y="60" textAnchor="middle" fontSize="12" fill="#0f172a">IAM Dataset (HDF5)</text>

              <line x1="190" y1="60" x2="280" y2="60" stroke="#94a3b8" strokeWidth="2" strokeLinecap="round" />
              <polygon points="280,56 292,60 280,64" fill="#94a3b8" />

              <rect x="300" y="10" rx="10" ry="10" width="200" height="80" fill="url(#g1)" filter="url(#shadow)" />
              <text x="400" y="40" textAnchor="middle" fontSize="13" fontWeight="600" fill="#021025">Style Encoder</text>
              <text x="400" y="58" textAnchor="middle" fontSize="12" fill="#021025">VAE option · Temporal Pooling</text>

              <line x1="510" y1="50" x2="610" y2="50" stroke="#94a3b8" strokeWidth="2" strokeLinecap="round" />
              <polygon points="610,46 622,50 610,54" fill="#94a3b8" />

              <rect x="640" y="-4" rx="12" ry="12" width="320" height="108" fill="#fff" stroke="#e6eefb" />
              <text x="800" y="28" textAnchor="middle" fontSize="14" fontWeight="700" fill="#0f172a">Generator</text>
              <text x="800" y="50" textAnchor="middle" fontSize="12" fill="#334155">Per-char style injection · Progressive upsampling</text>

              <rect x="320" y="120" rx="8" ry="8" width="240" height="80" fill="#fff" stroke="#e6eefb" />
              <text x="440" y="150" textAnchor="middle" fontSize="13" fontWeight="600" fill="#0f172a">Global Discriminator</text>
              <text x="440" y="168" textAnchor="middle" fontSize="12" fill="#0f172a">Length-aware pooling</text>

              <rect x="580" y="120" rx="8" ry="8" width="240" height="80" fill="#fff" stroke="#e6eefb" />
              <text x="700" y="150" textAnchor="middle" fontSize="13" fontWeight="600" fill="#0f172a">Patch Discriminator</text>
              <text x="700" y="168" textAnchor="middle" fontSize="12" fill="#0f172a">Local texture & pen pressure</text>

              <line x1="800" y1="104" x2="440" y2="120" stroke="#94a3b8" strokeWidth="2" strokeLinecap="round" />
              <line x1="800" y1="104" x2="700" y2="120" stroke="#94a3b8" strokeWidth="2" strokeLinecap="round" />
            </svg>
          );
        }

        function GeneratorSVG() {
          return (
            <svg viewBox="0 0 600 220" className="w-full h-64" preserveAspectRatio="xMidYMid meet">
              <defs>
                <linearGradient id="g2" x1="0" x2="1">
                  <stop offset="0%" stopColor="#34d399" />
                  <stop offset="100%" stopColor="#06b6d4" />
                </linearGradient>
              </defs>

              <rect x="10" y="10" width="120" height="40" rx="8" fill="#fff" stroke="#e6eefb" />
              <text x="70" y="35" textAnchor="middle" fontSize="12" fill="#0f172a">Text Embedding</text>

              <rect x="150" y="10" width="120" height="40" rx="8" fill="#fff" stroke="#e6eefb" />
              <text x="210" y="30" textAnchor="middle" fontSize="12" fill="#0f172a">Style Vector (z)</text>

              <line x1="130" y1="30" x2="150" y2="30" stroke="#94a3b8" strokeWidth="2" />

              <rect x="310" y="-6" width="260" height="120" rx="12" fill="url(#g2)" />
              <text x="440" y="18" textAnchor="middle" fontSize="13" fontWeight="700" fill="#042a2b">FilterLinear → Spatial Map</text>
              <text x="440" y="36" textAnchor="middle" fontSize="12" fill="#042a2b">512 channels → Progressive Upsampling</text>

              <g transform="translate(40,110)">
                <rect x="0" y="0" width="80" height="32" rx="6" fill="#fff" stroke="#e6eefb" />
                <text x="40" y="20" textAnchor="middle" fontSize="11">GBlock 0</text>

                <rect x="100" y="0" width="80" height="32" rx="6" fill="#fff" stroke="#e6eefb" />
                <text x="140" y="20" textAnchor="middle" fontSize="11">GBlock 1</text>

                <rect x="200" y="0" width="80" height="32" rx="6" fill="#fff" stroke="#e6eefb" />
                <text x="240" y="20" textAnchor="middle" fontSize="11">GBlock 2</text>

                <rect x="300" y="0" width="80" height="32" rx="6" fill="#fff" stroke="#e6eefb" />
                <text x="340" y="20" textAnchor="middle" fontSize="11">GBlock 3</text>
              </g>

              <text x="300" y="180" textAnchor="middle" fontSize="12" fill="#334155">Output: [B,1,64,W] · Tanh normalized</text>
            </svg>
          );
        }

        function DiscriminatorSVG() {
          return (
            <svg viewBox="0 0 680 220" className="w-full h-64" preserveAspectRatio="xMidYMid meet">
              <rect x="20" y="20" width="120" height="48" rx="8" fill="#fff" stroke="#e6eefb" />
              <text x="80" y="50" textAnchor="middle" fontSize="12" fill="#0f172a">Input Image</text>

              <g transform="translate(160,14)">
                <rect x="0" y="0" width="140" height="32" rx="6" fill="#fff" stroke="#e6eefb" />
                <text x="70" y="20" textAnchor="middle" fontSize="11">DBlock 0</text>

                <rect x="0" y="46" width="140" height="32" rx="6" fill="#fff" stroke="#e6eefb" />
                <text x="70" y="66" textAnchor="middle" fontSize="11">DBlock 1</text>

                <rect x="0" y="92" width="140" height="32" rx="6" fill="#fff" stroke="#e6eefb" />
                <text x="70" y="112" textAnchor="middle" fontSize="11">DBlock 2</text>

                <rect x="0" y="138" width="140" height="32" rx="6" fill="#fff" stroke="#e6eefb" />
                <text x="70" y="158" textAnchor="middle" fontSize="11">DBlock 3</text>
              </g>

              <rect x="360" y="40" width="240" height="120" rx="10" fill="#fff" stroke="#e6eefb" />
              <text x="480" y="70" textAnchor="middle" fontSize="13" fontWeight="700" fill="#0f172a">Length-Aware Pooling + Head</text>
              <text x="480" y="92" textAnchor="middle" fontSize="12" fill="#0f172a">Masked pooling · SN Linear → Logit</text>
            </svg>
          );
        }

        function HiGANPlusShowcase() {
          return (
            <div className="min-h-screen bg-gradient-to-b from-white via-sky-50 to-white text-slate-900 p-6">
              <div className="max-w-6xl mx-auto">
                <header className="flex items-center justify-between py-6">
                  <div>
                    <h1 className="text-3xl font-extrabold">HiGAN+ — Handwriting Synthesis (Showcase)</h1>
                    <p className="mt-1 text-slate-600">Enhanced HiGAN+ architecture: dual discriminators, VAE style encoder, contextual loss, and more.</p>
                  </div>
                  <div className="text-sm text-slate-500">
                    <div>Last updated: <strong>October 2025</strong></div>
                    <div>Author: <strong>Your Name</strong></div>
                  </div>
                </header>

                <section className="mt-6 bg-white shadow rounded-lg p-6">
                  <h2 className="text-2xl font-semibold">Executive Summary</h2>
                  <p className="mt-3 text-slate-700 leading-relaxed">HiGAN+ is a handwriting generation model trained on the IAM dataset. Key improvements include a dual-scale discriminator pair (global + patch), a VAE-enabled style encoder, adaptive gradient penalty balancing, and a contextual loss that preserves non-aligned texture statistics. The model targets readability (CTC supervision) and style fidelity (writer ID).</p>
                </section>

                <section className="mt-6 grid grid-cols-1 lg:grid-cols-2 gap-6">
                  <div className="bg-white shadow rounded-lg p-6">
                    <h3 className="text-xl font-semibold">Dataset & Preprocessing</h3>
                    <ul className="mt-3 list-disc pl-5 text-slate-700">
                      <li>IAM Handwriting Database (converted to HDF5): ~45K training words, 372 writers.</li>
                      <li>Normalization to [-1,1], fixed height 64 px, variable width proportional to character count.</li>
                      <li>Augmentation pipeline: elastic transforms, grid distortion, brightness/contrast, coarse dropout.</li>
                      <li>Curriculum learning option: progressively expand word length distribution across epochs.</li>
                    </ul>
                  </div>

                  <div className="bg-white shadow rounded-lg p-6">
                    <h3 className="text-xl font-semibold">Training Recipe</h3>
                    <p className="mt-2 text-slate-700">Two-phase update schedule: discriminator updates every iteration; generator updates every 4 iterations. Loss components include hinge adversarial loss, CTC OCR loss, writer-ID cross-entropy, pixel L1 reconstruction, contextual loss, and optional KL regularization.</p>
                    <div className="mt-4 text-sm text-slate-600">
                      <div><strong>Epochs:</strong> 70 (decay starts at 25)</div>
                      <div><strong>Batch size:</strong> 8 (supports gradient accumulation)</div>
                      <div><strong>Optimizers:</strong> Adam (G lr 2e-4, D lr 2e-4; β1=0.5, β2=0.999)</div>
                    </div>
                  </div>
                </section>

                <section className="mt-6 bg-white shadow rounded-lg p-6">
                  <h2 className="text-2xl font-semibold">Model Architecture</h2>

                  <div className="mt-4">
                    <h4 className="text-lg font-medium">High-level Pipeline</h4>
                    <div className="mt-3 border rounded-lg p-4 bg-gradient-to-r from-sky-50 to-white">
                      <PipelineSVG />
                    </div>
                  </div>

                  <div className="mt-6 grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div className="p-4 bg-white rounded-lg shadow">
                      <h5 className="font-semibold">Generator (details)</h5>
                      <p className="mt-2 text-slate-700">Per-character learned embeddings (120-dim) are concatenated with a 32-dim style code and projected to spatial maps using a FilterLinear. Progressive GBlocks upsample width rapidly to produce [B,1,64,W]. Conditional batch-norm (style chunks) and spectral normalization are used throughout.</p>
                      <GeneratorSVG />
                    </div>

                    <div className="p-4 bg-white rounded-lg shadow">
                      <h5 className="font-semibold">Discriminators & Encoder</h5>
                      <p className="mt-2 text-slate-700">Global discriminator evaluates structure with length-aware masked pooling; patch discriminator enforces local texture realism. StyleBackbone is shared between style encoder, OCR recognizer and writer identifier to maximize feature reuse.</p>
                      <DiscriminatorSVG />
                    </div>
                  </div>
                </section>

                <section className="mt-6 bg-white shadow rounded-lg p-6">
                  <h2 className="text-2xl font-semibold">Metrics & Results</h2>
                  <p className="mt-2 text-slate-700">Comparative visualization of current performance vs target goals.</p>

                  <div className="mt-4" style={{height: 320}}>
                    <ResponsiveContainer width="100%" height={300}>
                      <BarChart data={metricsData} margin={{ top: 20, right: 20, left: 20, bottom: 20 }}>
                        <CartesianGrid strokeDasharray="3 3" />
                        <XAxis dataKey="name" />
                        <YAxis />
                        <Tooltip />
                        <Legend />
                        <Bar dataKey="Current" fill="#3b82f6" name="Current" barSize={18} />
                        <Bar dataKey="Target" fill="#10b981" name="Target" barSize={18} />
                      </BarChart>
                    </ResponsiveContainer>
                  </div>

                  <div className="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div className="p-3 bg-sky-50 rounded">
                      <h4 className="font-semibold">CER</h4>
                      <p className="text-sm text-slate-700">Current ~10% → Target &lt;5%</p>
                    </div>
                    <div className="p-3 bg-sky-50 rounded">
                      <h4 className="font-semibold">FID</h4>
                      <p className="text-sm text-slate-700">Current ~52 → Target &lt;30</p>
                    </div>
                    <div className="p-3 bg-sky-50 rounded">
                      <h4 className="font-semibold">WIER</h4>
                      <p className="text-sm text-slate-700">Evaluate writer ID fooling rate to measure style fidelity.</p>
                    </div>
                  </div>
                </section>

                <section className="mt-6 bg-white shadow rounded-lg p-6 mb-12">
                  <h2 className="text-2xl font-semibold">Visual Gallery</h2>
                  <p className="mt-2 text-slate-700">Sample outputs from the model (placeholders - replace with actual generated images)</p>

                  <div className="mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                    {[1,2,3,4,5,6].map((i) => (
                      <div key={i} className="rounded-lg border p-3 bg-white">
                        <div className="h-40 bg-gradient-to-br from-white to-sky-50 flex items-center justify-center text-slate-400">Sample output {i}</div>
                        <div className="mt-2 text-sm text-slate-600">Style: random · Text: "Example"</div>
                      </div>
                    ))}
                  </div>
                </section>

              </div>
            </div>
          );
        }

        // Render the app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<HiGANPlusShowcase />);
    </script>
</body>
</html>
